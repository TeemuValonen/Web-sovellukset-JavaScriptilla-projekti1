<!doctype html>
<html>

<script>
/* var riviLKM laskee taulukkoon lisättyjen rivien lukumäärän,
jotta funktio merkinta() kykenisi tulostamaan tyhjiä rivejä */
var riviLKM = 0;


/* tämä on se fumktio, joka tekee varsinaisen työn */
function merkinta() {
	riviLKM++;

/* Funktiota kutsutaan napilla. Ilman syötteitä tulostetaan vain päivämäärä,
jolloin merkintä tehtiin.

Muuttujat lista, rivi ja jokainen solu (1-4) käytännössä luovat tyhjän
rivin taulukkoon. */

	var lista = document.getElementById("tasks");

	var rivi =  lista.insertRow();

	var solu1 = rivi.insertCell(0);
	var solu2 = rivi.insertCell(1);
	var solu3 = rivi.insertCell(2);
	var solu4 = rivi.insertCell(3);

/* HTML:ssä olemme antaneet tekstikentille ID:t, joiden perusteella
funktio löytää oikeat tekstikentät ja tallentaa niiden sisällön muuttujiin. */

	var tekija = document.getElementById('tekija').value;
	var otsikko  = document.getElementById('otsikko').value;
	var tehtava = document.getElementById('task').value;
	var pvm = document.getElementById('pvm').value;

/* Muuttuja lisatty saa arvokseen tietokoneen kellon mukaisen päivämäärän.
JavaScriptin new Date() -funktio kuitenkin palauttaa myös aikavyöhykkeen
ja tarkan kellonajan, joten funktiomme pvmNYT(lisaty) muuntaa sen tutumpaan
muotoon. */
	var lisatty = new Date();
	var aika = pvmNYT(lisatty);

/* tässä kohtaa sijoitetaan tekstikenttien syötteet taulukkoon oikeisiin
kohtiin innerHTML -komennoilla */
	solu1.innerHTML = tekija;
	solu2.innerHTML = otsikko;
	solu3.innerHTML = tehtava + "<br><br>" + "--  " + aika;
	solu4.innerHTML = pvm;

/* funktion lopussa if -lause tarkastaa, kuinka mones rivi on edellisestä
tarkastuksesta. Näin joka viidennen rivin jälkeen tulostetaan tyhjä rivi
ja muuttuja alustetaan uudestaan. */

	if (riviLKM == 5) {
			riviLKM = 0;

		rivi = lista.insertRow();

		solu1 = rivi.insertCell(0);
		solu2 = rivi.insertCell(1);
		solu3 = rivi.insertCell(2);
		solu4 = rivi.insertCell(3);

		solu1.innerHTML = "<br>";
		solu2.innerHTML = " ";
		solu3.innerHTML = " ";
		solu4.innerHTML = " ";

	}
}

/* Tämä funktio palauttaa päivämäärän eurooppalaisessa muodossa ennen kuin
se tulostetaan taulukossa. */
function pvmNYT(pvm) {
	var pv = pvm.getDate();
	var kk = pvm.getMonth()+1;
	var vuosi = pvm.getFullYear();

	return pv + "." + kk + "." + vuosi;
}

</script>

<head>
<meta charset="utf-8">
<title>Projekti 1</title>
<link rel="stylesheet" type="text/css" href="css-default.css">
</head>
<body>
	<div class="nootti">
		<div class="left">
		<h2> notes. </h2>
	</div>
		<div class="input", id="syote">

			<p>tekijä
			<input type="text" id="tekija" class="hopo" style="margin-left: 12px;">
					<br>
			<p>otsikko
			<input type="text" id="otsikko" class="hopo" style="margin-left:1px;">
					<br>
			<p>deadline
			<input type="text" id="pvm" class="hopo" style="margin-left: 12px;">
					<br>
			<p>tehtävä
			<textarea class="hopo" name="tehtava" id="task"></textarea>
		</p>

			<input class="nappi" type="button" onclick="merkinta()" value=">>">
	</div>

		<hr style="height:3px; background-color: #70AAD5; width:90%; border: 0px; margin-top: 20px;">

	<div class="data">

		<table id="tasks" border="1">

			<thead>
	      <tr>
	        <th>tekijä</th>
	        <th>otsikko</th>
	        <th>tehtävä</th>
					<th>deadline</th>
	      </tr>
	    </thead>
			<tbody>
			</tbody>

		</table>

	</div>

	</div>

</body>
</html>
